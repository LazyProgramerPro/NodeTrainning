# SaaS là gì ?!
- Saas là viết tắt của Software as a Service, là một mô hình kinh doanh phần mềm dựa trên việc cung cấp phần mềm dưới dạng dịch vụ. Thay vì phải mua một phần mềm và cài đặt nó trên máy tính, người dùng chỉ cần truy cập vào trình duyệt và sử dụng phần mềm thông qua internet.
- Với mô hình này, người dùng không cần phải lo lắng về việc cài đặt, bảo trì và nâng cấp phần mềm, mà chỉ cần trả tiền theo dạng thuê bao hàng tháng hoặc hàng năm.
- Một số ứng dụng phổ biến được triển khai theo mô hình Saas bao gồm: Google Workspace, Microsoft 365, Slack, Zoom, Salesforce, Zendesk, v.v.
# A SaaS setup
- Các ứng dụng SaaS thường được triển khai trên môi trường cloud, giúp giảm chi phí về cơ sở hạ tầng và tăng tính linh hoạt trong việc mở rộng hệ thống.
- Một số dịch vụ cloud phổ biến được sử dụng để triển khai ứng dụng SaaS bao gồm: AWS, Google Cloud, Microsoft Azure, Heroku, DigitalOcean, v.v.
# So sánh SaaS với các phần mềm dành cho doanh nghiệp

- Sở hữu 1 chiếc xe:
  - Là ông chủ hoàn toàn
  - Có quyền kiểm soát hoàn toàn
  - Chọn màu sắc, chọn động cơ, chọn nội thất, chọn loại lốp, chọn loại nhiên liệu, chọn loại dầu nhớt, chọn loại bảo hiểm, chọn loại phụ tùng, chọn loại đồ chơi, chọn loại đồ trang trí
  - Không phải chờ đợi
  - Có sự riêng tư
  - Bảo mật cao
  - Chi phí cao
  - Tiền nhiên liệu, tiền bảo hiểm, tiền bảo dưỡng, tiền sửa chữa, tiền phụ tùng, tiền đồ chơi, tiền đồ trang trí, cung cấp nơi đậu xe ...
- Thuê 1 chiếc xe:
  - Không phải trả tiền mua xe
  - Không phải trả tiền bảo hiểm
  - Trả tiền cho những thứ cần thiết
  - Có thể đổi trả hãng xe, loại xe
- Việc xâu dựng 1 ứng dụng phục vụ cho doanh nghiệp cũng giống như bạn sở hữu 1 chiếc xe ô tô. Bạn sở hữu nó thì bạn phải trả tiền cho nó
- SaaS giống như thuê 1 chiếc xe ô tô. Bạn không phải trả tiền mua nó, chỉ trả tiền sử dụng nó
- Công nghệ ngày nay và nhu cầu tài chính của công ty đang thúc đẩy hướng tới việc sư dụng SaaS

# SaaS elements
- Một ứng dụng SaaS bao gồm các phần chính sau:
  - Frontend: Giao diện người dùng, thường được xây dựng bằng HTML, CSS, JavaScript, React, Angular, Vue, v.v.
  - Backend: Phần xử lý logic, thường được xây dựng bằng Node.js, Python, Ruby, Java, v.v.
  - Database: Lưu trữ dữ liệu, thường được xây dựng bằng MySQL, PostgreSQL, MongoDB, v.v.
  - Authentication: Xác thực người dùng, thường được xây dựng bằng JWT, OAuth, v.v.
  - Payment: Xử lý thanh toán, thường được xây dựng bằng Stripe, PayPal, v.v.
  - Hosting: Triển khai ứng dụng, thường được xây dựng bằng AWS, Google Cloud, Heroku, v.v.
- Service providers: nhà cung cấp dịch vụ là người sở hữu phần cứng và phần mềm cung cấp SaaS cho người dùng. Trên thực tế phần cứng và phần mềm này thường được thuê từ các nhà cung cấp dịch vụ cloud như AWS, Google Cloud, Microsoft Azure, v.v. Họ chịu trách nhiệm về việc quản lí, bảo trì và nâng cấp hệ thống và họ sẽ xây dựng cho người thuê dựa trên việc sử dụng và thu phí theo mô hình thuê bao.
- Tenants: người dùng cuối cùng của ứng dụng SaaS được gọi là tenants. Họ sử dụng ứng dụng thông qua trình duyệt web hoặc ứng dụng di động, và trả tiền theo dạng thuê bao hàng tháng hoặc hàng năm. Quy mô của tenants có thể từ vài người dùng đến hàng triệu người dùng.
- Users: mỗi tenant có thể có nhiều người dùng, mỗi người dùng có thể có các quyền hạn khác nhau trong hệ thống. Ví dụ: người dùng có thể là quản trị viên, nhân viên, khách hàng, v.v.
- Operations: quản lí và vận hành hệ thống SaaS, bao gồm việc giám sát, bảo trì, nâng cấp, sao lưu, khôi phục, v.v.
# SasS, PaaS, IaaS
- SaaS (Software as a Service): là mô hình cung cấp phần mềm dưới dạng dịch vụ, người dùng chỉ cần truy cập vào trình duyệt và sử dụng phần mềm thông qua internet.
  - Bussiness Application: ứng dụng doanh nghiệp, Google Workspace, Microsoft 365, v.v.
  - Intergation: tích hợp, kết nối, v.v.
  - Use App
  - GG App, Office 365, Slack, Zoom, Salesforce, Zendesk, v.v.
- PaaS (Platform as a Service): là mô hình cung cấp một nền tảng phát triển ứng dụng dưới dạng dịch vụ, giúp người dùng xây dựng và triển khai ứng dụng một cách nhanh chóng và dễ dàng.
  - OS: hệ điều hành, Linux, Windows, v.v.
  - Database: cơ sở dữ liệu, MySQL, PostgreSQL, MongoDB, v.v.
  - Web Server: máy chủ web, Apache, Nginx, v.v.
  - IDE: môi trường phát triển, Visual Studio Code, IntelliJ IDEA, v.v.
  - Tools: công cụ hỗ trợ, Git, Docker, Jenkins, v.v.
  - Deployment: triển khai, cài đặt, v.v.
  - Development: phát triển, lập trình, v.v.
  - Cloud Storage: lưu trữ trên cloud, Amazon S3, Google Cloud Storage, v.v.
  - Amazon Elastic Beanstalk, Google App Engine, Microsoft Azure App Service, v.v.
- IaaS (Infrastructure as a Service): là mô hình cung cấp cơ sở hạ tầng máy chủ, lưu trữ, mạng, v.v. dưới dạng dịch vụ, giúp người dùng triển khai ứng dụng một cách linh hoạt và tiết kiệm chi phí.
  - Hardware: máy chủ, ổ cứng, bộ nhớ, CPU, v.v.
  - Computer Power: máy ảo, máy chủ ảo, v.v.
  - Network: mạng, băng thông, IP, v.v.
  - Storage: lưu trữ, ổ cứng, v.v.
  - Data Center: trung tâm dữ liệu, phòng máy, v.v.
  - Development: phát triển, lập trình, v.v.
  - Deployment: triển khai, cài đặt, v.v.
  - Amazon EC2, Google Compute Engine, Microsoft Azure Virtual Machines, v.v.

# SaaS architecture
- Scalability: khả năng mở rộng hệ thống, tăng cường tài nguyên khi cần thiết, giảm tài nguyên khi không cần thiết.
- Multi-tenancy: khả năng phục vụ nhiều tenants trên cùng một hệ thống, mỗi tenant có thể có nhiều người dùng và dữ liệu riêng biệt.
- Security: bảo mật hệ thống, dữ liệu và người dùng, bao gồm xác thực, ủy quyền, mã hóa, giám sát, bảo mật mạng, v.v.
- Monitoring: giám sát hệ thống, dữ liệu và người dùng, bao gồm giám sát hiệu suất, giám sát lỗi, giám sát bảo mật, v.v.
- Availability: sẵn sàng hệ thống, dữ liệu và người dùng, bao gồm sao lưu, khôi phục, chống chịu lỗi, v.v.
- Performance: hiệu suất hệ thống, dữ liệu và người dùng, bao gồm tốc độ truy cập, tốc độ xử lý, tốc độ phản hồi, v.v.
- Reliability: đáng tin cậy hệ thống, dữ liệu và người dùng, bao gồm ổn định, bền vững, chịu lỗi, v.v.
- Cost: chi phí triển khai, vận hành và nâng cấp hệ thống, bao gồm chi phí phần cứng, chi phí phần mềm, chi phí dịch vụ, chi phí nhân sự, v.v.

# Use cases
- E-commerce: thương mại điện tử, bán hàng trực tuyến, v.v.
- CRM: quản lý mối quan hệ khách hàng, v.v.
- HRM: quản lý nguồn nhân lực, v.v.
- ERP: quản lý tài nguyên doanh nghiệp, v.v.
- CMS: quản lý nội dung, v.v.
- LMS: hệ thống quản lý học tập, v.v.
- Video Conferencing: họp trực tuyến, v.v.
- Project Management: quản lý dự án, v.v.
- Accounting: kế toán, v.v.
- Marketing Automation: tự động hóa marketing, v.v.
- Help Desk: trợ giúp trực tuyến, v.v.
- Collaboration: hợp tác làm việc, v.v.

# Concepts

- ITS: Incident Tracking System là hệ thống theo dõi sự cố, vấn đề, yêu cầu, v.v.
  - Issue Tracking Service: dịch vụ theo dõi vấn đề
  - Log Reporting Incident: báo cáo sự cố
  - Assigning Incident: gán sự cố
  - Tracking Progress and closure: theo dõi tiến độ và đóng cửa
  - Dashboard and Reporting: bảng điều khiển và báo cáo
  - Simultaneous User Metering: đo lường người dùng đồng thời
- LCS: Live Chat Service là dịch vụ trò chuyện trực tuyến
  - Chatbot: trò chuyện tự động
  - Live Chat: trò chuyện trực tiếp
  - Chat History: lịch sử trò chuyện
  - Chat Transfer: chuyển trò chuyện
  - Chat Rating: đánh giá trò chuyện
  - Chat Reporting: báo cáo trò chuyện
- Multi-tenancy: đa người thuê
  - Shared Database: cơ sở dữ liệu chia sẻ
  - Shared Application: ứng dụng chia sẻ
  - Shared Infrastructure: cơ sở hạ tầng chia sẻ
  - Tenant Isolation: cô lập người thuê
  - Tenant Customization: tùy chỉnh người thuê
  - Tenant Management: quản lý người thuê

# Multi-tenancy architecture
- Multi-tenancy là một kiến trúc phần mềm cho phép nhiều tenants sử dụng cùng một ứng dụng, mỗi tenant có thể có nhiều người dùng và dữ liệu riêng biệt.
- Các ứng dụng SaaS thường triển khai theo mô hình multi-tenancy để giảm chi phí về cơ sở hạ tầng và tăng tính linh hoạt trong việc mở rộng hệ thống.
- Mỗi tenant có thể có một hoặc nhiều người dùng, mỗi người dùng có thể có các quyền hạn khác nhau trong hệ thống.
- Mỗi tenant là khác nhau, dữ liệu của mỗi tenant được lưu trữ và xử lý riêng biệt, không thể truy cập dữ liệu của tenant khác.
- Họ có những mong muốn và những yêu cầu khác nhau về sản phẩm: Một số chỉ cần những chức năng cơ bản, một số cần những chức năng nâng cao, một số cần những chức năng tùy chỉnh, dữ liệu bảo mật, v.v.

# Tenant Resource Allocation
- Saas resource type:
  - CPU: Central Processing Unit, bộ xử lý trung tâm
  - Memory: bộ nhớ
  - Storage: lưu trữ
  - Network: mạng
  - Database: cơ sở dữ liệu
  - Application: ứng dụng
- Exclusive resource allocation: phân bổ tài nguyên riêng biệt
- Shared resource allocation: phân bổ tài nguyên chia sẻ
- Farm resource allocation: phân bổ tài nguyên trang trại

# Tenant Context Awareness
- Tenant context: ngữ cảnh người thuê
- Tenant context awareness: nhận biết ngữ cảnh người thuê
# Teneant State Management
- Tenant state: trạng thái người thuê
- Tenant state management: quản lý trạng thái người thuê

# Tenant Stateless Service
- Tenant stateless service: dịch vụ không lưu trạng thái người thuê
# Tenant Stateful Service
- Tenant stateful service: dịch vụ lưu trạng thái người thuê
# Data Service
- Data service: dịch vụ dữ liệu
# Provisioning Service Architecture
- Provisioning service: dịch vụ cung cấp
# Monitoring Service
- Monitoring service: dịch vụ giám sát
# Upgrade Service
- Upgrade service: dịch vụ nâng cấp
# Security Service
- Security service: dịch vụ bảo mật
# Backup Service 
- Backup service: dịch vụ sao lưu
# Integration Service
- Integration service: dịch vụ tích hợp

# Multi-tenancy 
- Multi-tenancy là một kiến trúc phần mềm cho phép nhiều tenants sử dụng cùng một ứng dụng, mỗi tenant có thể có nhiều người dùng và dữ liệu riêng biệt.
- Các ứng dụng SaaS thường triển khai theo mô hình multi-tenancy để giảm chi phí về cơ sở hạ tầng và tăng tính linh hoạt trong việc mở rộng hệ thống.
- Tenant: người thuê, công ty, cá nhân,.., người dùng cuối cùng của ứng dụng SaaS.Về cơ bản là 1 thực thể nào đó đang sử dụng SaaS của chúng ta
- Single-tenancy: mỗi tenant sử dụng một ứng dụng riêng biệt, mỗi ứng dụng có cơ sở dữ liệu riêng biệt, không chia sẻ dữ liệu với tenant khác. Trong trường hợp này bạn sẽ phải truy cập vào máy chủ Hardware và cài đặt ứng dụng cũng như cài đặt kho lưu trữ của b lên đó
- Multi-tenancy: Chúng ta sẽ không phải tạo lập các phiên bản khác nhau của SaaS cho từng khách hàng mà chúng ta sẽ sử dụng cùng 1 phiên bản SaaS cho tất cả khách hàng. Chúng ta có thể cung cấp cho khách hàng các tên miền riêng, giao diện riêng, dữ liệu riêng, v.v. mà không cần phải tạo ra nhiều phiên bản của ứng dụng. Ý tưởng kiểu như đang xây dựng 1 loại phần mềm thương mại điện tử nào đó cho phép người dùng của bạn tạo ra 1 trang web thương mại điện tử riêng của họ mà không cần phải cài đặt 1 ứng dụng mới

# Nextjs Multi-tenancy
https://github.com/vercel/platforms/blob/main/middleware.ts

blog-2.domain.com => domain.com/blog-2

https://github.com/vercel/platforms/blob/main/app/%5Bdomain%5D/page.tsx

pages/[domain]/page.tsx

- Cách đơn giản là khi có yêu cầu đến, bạn cần biết đó là yêu cầu của ai, sau đó dựa vào thông tin đó để phục vụ yêu cầu đó. Ví dụ: bạn có thể sử dụng tên miền để xác định tenant, hoặc sử dụng header, query, cookie, v.v.

# Data Isolation Options: Cách ly dữ liệu
- Đảm bảo phân biệt được các yêu cầu của các tenant khác nhau và trả về dữ liệu phù hợp với từng tenant, không cho phép truy cập dữ liệu của tenant khác.
- Ràng buộc dữ liệu theo các tenantId, userId, v.v.
- Sử dụng cơ sở dữ liệu chia sẻ hoặc cơ sở dữ liệu riêng biệt cho từng tenant.

